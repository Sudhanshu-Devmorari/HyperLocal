$(document).ready(function () {
  // Handle form submission
  $(".locationInput").on("input", function (event) {

    const location = [
      "Birmingham, AL",
      "Huntsville, AL",
      "Mobile, AL",
      "Anchorage, AK",
      "Fairbanks, AK",
      "Phoenix, AZ",
      "Prescott, AZ",
      "Scottsdale, AZ",
      "Tuscon, AZ",
      "Little Rock, AR",
      "Bakersfield, CA",
      "Fresno, CA",
      "Long BeachLong Beach",
      "Los Angeles, CA",
      "Napa, CA",
      "Oakland, CA",
      "Orange County, CA",
      "Riverside, CA",
      "Sacramento, CA",
      "San Diego, CA",
      "San Francisco, CA",
      "San Jose, CA",
      "San Luis Obispo, CA",
      "Santa Barbara, CA",
      "Santa Cruz, CA",
      "Colorado Springs, CO",
      "Denver, CO",
      "Grand Junction, CO",
      "Pueblo, CO",
      "Bridgeport, CT",
      "Hartford, CT",
      "New Haven, CT",
      "Wilmington, DE",
      "Daytona Beach, FL",
      "Fort Lauderdale, FL",
      "Jacksonville, FL",
      "Key West, FL",
      "Miami, FL",
      "Orlando, FL",
      "Tampa, FL",
      "West Palm Beach, FL",
      "Atlanta, GA",
      "Columbus, GA",
      "Savannah, GA",
      "Honolulu, HI",
      "Boise City, ID",
      "Bloomington, IL",
      "Champaign, IL",
      "Chicago, IL",
      "Indianapolis, IN",
      "Muncie, IN",
      "South Bend, IN",
      "Des Moines, IA",
      "Cedar Rapids, IA",
      "Wichita, KS",
      "Lexington, KY",
      "Louisville, KY",
      "Baton Rouge, LA",
      "Lafayette, LA",
      "New Orleans, LA",
      "Shreveport, LA",
      "Portland, ME",
      "Baltimore, MD",
      "Boston, MA",
      "Worcester, MA",
      "Detroit, MI",
      "Flint, MI",
      "Grand Rapids, MI",
      "Duluth, MN",
      "Minneapolis, MN",
      "Jackson, MS",
      "Kansas CityKansas City",
      "St. Louis, MO",
      "Springfield, MO",
      "Billings, MT",
      "Lincoln, NE",
      "Omaha, NE",
      "Las Vegas, NV",
      "Reno, NV",
      "Manchester, NH",
      "Atlantic City, NJ",
      "Newark, NJ",
      "Albuquerue, NM",
      "Santa Fe, NM",
      "Albany, NY",
      "Bronx, NY",
      "Brooklyn, NY",
      "Buffalo, NY",
      "Manhattan, NY",
      "New York City, NY",
      "Queens, NY",
      "Rochester, NY",
      "Staten Island, NY",
      "Charlotte, NC",
      "Durham, NC",
      "Fayetteville, NC",
      "Greensboro, NC",
      "Raleigh, NC",
      "Fargo, ND",
      "Cincinnati, OH",
      "Cleveland, OH",
      "Columbus, OH",
      "Dayton, OH",
      "Toledo, OH",
      "Oklahoma City, OK",
      "Tulsa, OK",
      "Portland, OR",
      "Harrisburg, PA",
      "Philadelphia, PA",
      "Pittsburgh, PA",
      "Providence, RI",
      "Charleston, SC",
      "Columbia, SC",
      "Sioux Falls, SD",
      "Chattanooga, TN",
      "Knoxville, TN",
      "Nashville, TN",
      "Memphis, TN",
      "Austin, TX",
      "Dallas, TX",
      "El Paso, TX",
      "Houston, TX",
      "McAllen, TX",
      "San Antonio, TX",
      "Waco, TX",
      "Salt Lake City, UT",
      "Burlington, VT",
      "Richmond, VA",
      "Virginia Beach, VA",
      "Seattle, WA",
      "Spokane, WA",
      "Tacoma, WA",
      "Charleston, WV",
      "Green Bay, WI",
      "Madison, WI",
      "Milwaukee, WI",
      "Cheyenne, WY",
    ];

    console.log(event.target.value);

    const filteredLocations = location.filter((obj) =>
      obj.toLowerCase().startsWith(event.target.value.toLowerCase())
    );
    console.log(filteredLocations);
    const locationListEle = document.getElementById("locationList");
    locationListEle.style.display = "block"
    
    locationListEle.innerHTML = "";
    
    for (const loc of filteredLocations) {
      const child = document.createElement("option");
      child.text = loc;
      child.value = loc;
      child.style.padding = "0.5rem";
      child.style.backgroundColor = "white";
      child.style.cursor = "pointer";

      child.addEventListener("click", function (e) {
        console.log(e.target.value);
        $(".locationInput").val(e.target.value);
        locationListEle.innerHTML = "";
        locationListEle.style.display = "none"
      });
      locationListEle.append(child);
    }
  });

  $(".keywordInput").on("input", function (event) {
    const keyword = [
      'wealth managers',
      "Storage Units",
      "Plumbers",
      "Electricians",
      "Carpet Cleaning",
      "Moving Companies",
      "Pest Control",
      "Self Storage",
      "Appliance Repair",
      "Garage Door Repair",
      "Appliance Parts",
      "Cleaning Services",
      "Lawn Mower Repair",
      "Moving Truck Rental",
      "AC Repair",
      "Home Security System Installation",
      "Garden Centers",
      "Refrigerator Repair",
      "Plant Nurseries",
      "Tree Service",
      "General Contractors",
      "Patio Covers",
      "Window Replacement",
      "Arborists",
      "Gutter Cleaning",
      "Lawn Services",
      "Artificial Grass",
      "Pool Covers",
      "Sprinkler System",
      "Garden Supplies",
      "Window Cleaning",
      "Furnace Repair",
      "Mold Remediation",
      "Concrete Contractors",
      "Roofing Supplies",
      "Washing Machine Repair",
      "Interior Designers",
      "Irrigation Systems",
      "Water Heater Repair",
      "Mold Inspection",
      "Stump Removal",
      "Trash Pickup",
      "Termite Control",
      "Pool Services",
      "Septic Tank Cleaning",
      "Lawn Maintenance",
      "Water Damage Restoration",
      "Chimney Cleaning",
      "Moving Services",
      "Dishwasher Repair",
      "Piano Movers",
      "Drain Cleaning",
      "Carpet Repair",
      "Vacuum Cleaner Repair",
      "Painting Contractors",
      "Roof Cleaning",
      "Bee Removal",
      "Garbage Disposal Repair",
      "Paving Contractors",
      "Cabinet Refinishing",
      "Flooring Contractors",
      "Roofing Contractors",
      "Dentists",
      "Dermatologists",
      "Optometrists",
      "Physical Therapy",
      "Hospitals",
      "Endocrinologists",
      "Gynecologists",
      "Podiatrists",
      "Neurologists",
      "Ophthalmologists",
      "Gastroenterologists",
      "Pediatricians",
      "Orthodontists",
      "Urologists",
      "Rheumatologists",
      "Obgyn",
      "Physicians",
      "Cardiologists",
      "Radiology",
      "Pediatric Dentists",
      "Plastic Surgery",
      "Dental Implants",
      "Pulmonologists",
      "Obstetricians",
      "Orthopedic Surgeons",
      "Pain Management Clinics",
      "Proctologists",
      "Endodontists",
      "Periodontists",
      "Audiologists",
      "Ear Nose And Throat Doctors",
      "Medical Centers",
      "Gerontology",
      "Drug Test",
      "Opticians",
      "Childrens Hospitals",
      "Weight Loss Programs",
      "Family Doctors",
      "Osteopaths",
      "Dental Clinics",
      "Blood Test",
      "Blood Banks",
      "Cosmetic Surgery",
      "Anesthesiologists",
      "Allergists",
      "Nuclear Medicine",
      "Oral Surgery",
      "Wound Care Centers",
      "Prosthodontists",
      "Drug Rehab",
      "Pediatric Neurologists",
      "Cancer Treatment",
      "Radiation Oncology",
      "Child Psychiatrists",
      "Relationship Counselling",
      "Counseling Services",
      "Dialysis Centers",
      "Surgery Centers",
      "Pediatric Ophthalmologists",
      "Pediatric Orthopedics",
      "Emergency Care",
      "Dental Labs",
      "Pediatric Cardiologists",
      "Dental Hygienists",
      "Emergency Medicine",
      "Reproductive Endocrinologists",
      "Neuropsychiatrists",
      "Psychiatrists",
      "Occupational Medicine",
      "Vision Therapy",
      "Auto Parts",
      "Oil Change",
      "Tire Shops",
      "Auto Repair",
      "Window Tinting",
      "Towing",
      "Auto Body Shops",
      "Car Detailing",
      "Roadside Assistance",
      "Auto Glass Repair",
      "Tire Repair",
      "Auto Salvage",
      "Auto Glass",
      "Car Accessories",
      "Wheel Alignment",
      "Used Car Parts",
      "Car Transport",
      "Paintless Dent Repair",
      "Radiator Repair",
      "Car Alarm Installation",
      "4x4 Parts",
      "Auto Body Parts",
      "Brake Repair",
      "Auto AC Repair",
      "Car Wheels",
      "Car Stereo Systems",
      "Wholesale Tires",
      "Remanufactured Engines",
      "Automotive Machine Shops",
      "Bail Bonds",
      "Private Investigators",
      "Stenographers",
      "Divorce Attorneys",
      "Lie Detector Tests",
      "Car Accident Lawyers",
      "Family Law Attorneys",
      "Bankruptcy Attorneys",
      "Process Servers",
      "Tax Attorneys",
      "Fingerprinting Services",
      "Medical Malpractice Lawyers",
      "Accident Attorneys",
      "Child Custody Lawyers",
      "Business Lawyers",
      "Immigration Lawyers",
      "Workers Compensation Attorneys",
      "DUI Attorneys",
      "Car Insurance",
      "Boat Insurance",
      "Business Insurance",
      "Dental Insurance",
      "Disability Insurance",
      "Flood Insurance",
      "Home Insurance",
      "Insurance",
      "Liability Insurance",
      "Life Insurance",
      "Long Term Care Insurance",
      "Motorcycle Insurance",
      "Pet Insurance",
      "Renters Insurance",
      "RV Insurance",
      "Title Insurance",
      "Travel Insurance",
      "Truck Insurance",
      "Animal Shelters",
      "Dog Training",
      "Doggy Day Cares",
      "Emergency Vets",
      "Kennels",
      "Mobile Pet Grooming",
      "Pet Boarding",
      "Pet Cemeteries",
      "Pet Grooming",
      "Veterinary Clinics",
      "Beauty Salons",
      "Nail Salons",
      "Hair Salons",
      "Hair Extensions",
      "Cosmetology",
      "Massage Therapist",
      "Massage",
      "Reflexology",
      "Massage Spa",
      "Laser Hair Removal",
      "Electrolysis",
      "Eyebrow Waxing",
      "Tanning Salons",
      "Restaurants",
      "Catering",
      "Seafood Restaurants",
      "Family Restaurants",
      "Steakhouse",
      "Vegetarian Restaurants",
      "Buffet Restaurants",
      "Italian Restaurants",
      "Mexican Restaurants",
      "French Restaurants",
      "Japanese Restaurants",
      "American Restaurants",
      "Liquor Stores",
      "Grocery Stores",
      "Museums",
      "Dance Companies",
      "Talent Agencies",
      "Movie Theaters",
      "Concert Halls",
      "Dinner Theaters",
      "Bars",
      "Comedy Clubs",
      "Disc Jockeys",
      "Record Labels",
      "Car Rental",
      "Boat Dealers",
      "Boat Rental",
      "Boat Tours",
      "Archery Ranges",
      "Gun Ranges",
      "Water Pakrs",
      "Theme Parks",
      "Batting Cages",
      "Pool Halls",
      "Skating Rinks",
      "Golf Courses",
      "Public Swimming Pools",
      "Travel Agencies",
      "Dog Parks",
      "Science Museums",
      "Zoos",
      "Florists",
      "Gift Shops",
      "Pawn Shops",
      "Toy Stores",
      "Factory Outlets",
      "Smoke Shops",
      "Collectibles",
      "Gun Shops",
      "Hobby Shops",
      "Antique Shops",
      "Book Stores",
      "Clothing Stores",
      "Dry Cleaners",
      "Jewelers",
      "Bridal Shops",
      "Shoes Stores",
      "Shoe Repair",
      "Coin Laundry",
      "Watch Repair",
      "Print Shops",
      "Banks",
      "Accountants",
      "Personal Loans",
      "Mortgage Loans",
      "Bookkeepers",
      "Stock Brokers",
      "Financial Advisors",
      "Debt Settlement",
      "Churches",
      "Mosques",
      "Temples",
      "Post Offices",
      "Utility Companies",
      "Recycling Centers",
      "Social Security Offices",
      "Trash Removal",
    ];
    console.log(event.target.value);
    const filteredkeyword = keyword.filter((obj) =>
      obj.toLowerCase().startsWith(event.target.value.toLowerCase())
    );
    console.log(filteredkeyword);
    const serviceListEle = document.getElementById("serviceList");
    serviceListEle.style.display = "block"
    serviceListEle.innerHTML = "";
    for (const loc of filteredkeyword) {
      const child = document.createElement("option");
      child.text = loc;
      child.value = loc;
      child.style.padding = "0.5rem";
      child.style.backgroundColor = "white";
      child.style.cursor = "pointer";

      child.addEventListener("click", function (e) {
        console.log(e.target.value);
        $(".keywordInput").val(e.target.value);
        serviceListEle.innerHTML = "";
        serviceListEle.style.display = "none"
      });
      serviceListEle.append(child);
    }

  });

  $("#formsubmit").click(function (event) {
    console.log("asdasdas");
    event.preventDefault(); // Prevent the default form submission

    // Get the form values
    var keyword = $("#autocomplete-input").val();
    var location = $("#intro-keywords").val();
    var csrfToken = $("input[name=csrfmiddlewaretoken]").val();
    console.log(csrfToken, location, keyword);
    // Create the form data object
    var formData = {
      keyword: keyword,
      location: location,
      csrfmiddlewaretoken: csrfToken,
    };

    // Perform the AJAX POST request
    //   $.post("/business-list/",formData);
    $.ajax({
      url: "/business-list/",
      type: "POST",
      headers: { "X-CSRF-Token": csrfToken }, // Include the CSRF token in the request headers
      data: formData,
      success: function (response) {
        if (response.status == "success") {
          window.location.replace(response.url);
        }
        // Handle the success response
        //   $('body').html(response);
        console.log(response);
        //   window.location.href = "/"
        // Perform any further actions after the successful form submission
      },
      error: function (xhr, status, error) {
        // Handle the error response
        console.log(error);
        // Perform any further actions in case of an error
      },
    });
  });
});
